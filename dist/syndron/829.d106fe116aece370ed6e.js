"use strict";(self.webpackChunksyndron=self.webpackChunksyndron||[]).push([[829],{9505:(x,y,s)=>{s.d(y,{X:()=>U});var h=s(9765),t=s(7776),g=s(8583);let A=(()=>{class r{}return r.dateTransformFullYear="yyyy-MM-dd",r.dateTransformTime="HH:mm",r.dateTransformAmPm="h:mm a",r})();class f{constructor(m){this.datePipe=m}dateTransformFullYear(m){return this.datePipe.transform(m,A.dateTransformFullYear)}dateTransformTime(m){return this.datePipe.transform(m,A.dateTransformTime)}dateFromString(m){return new Date(Date.parse(m.replace(/-/g,"/")))}}var e=s(7716),b=s(8392),S=s(7535),p=s(3301),_=s(2290),l=s(1841),d=s(7339),w=s(9135);let v=(()=>{class r extends w.b{constructor(n){super(),this.http=n}getTimeSlotsByLawyerId(n){let i=new l.LE;return i=i.append("lawyerId",n),this.http.get(this.getBaseUrl(d.t.GetTimeSlotsByLawyerId),{params:i})}createTimeSlot(n){return this.http.post(this.getBaseUrl(d.t.CreateTimeSlot),n)}}return r.\u0275fac=function(n){return new(n||r)(e.LFG(l.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var c=s(6618),T=s(3679);const q=["modalContent"];function M(r,m){if(1&r){const n=e.EpF();e.TgZ(0,"mwl-calendar-month-view",30),e.NdJ("dayClicked",function(o){return e.CHM(n),e.oxw().dayClicked(o.day)})("dayClicked",function(){e.CHM(n);const o=e.oxw(),a=e.MAs(37);return o.openModal(a)})("eventClicked",function(o){return e.CHM(n),e.oxw().handleEvent("Clicked",o.event)})("eventTimesChanged",function(o){return e.CHM(n),e.oxw().eventTimesChanged(o)}),e.qZA()}if(2&r){const n=e.oxw();e.Q6J("viewDate",n.viewDate)("events",n.events)("refresh",n.refresh)}}function F(r,m){if(1&r&&(e.TgZ(0,"li",49),e.TgZ(1,"div",50),e.TgZ(2,"h6"),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&r){const n=m.$implicit;e.xp6(1),e.Q6J("ngClass",n.isBooked?"booked":"btn-event-type"),e.xp6(2),e.AsE("",n.fromTime," - ",n.toTime,"")}}function E(r,m){if(1&r){const n=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"h4",32),e._uU(2,"Add time slots"),e.qZA(),e.TgZ(3,"button",33),e.NdJ("click",function(){return e.CHM(n),e.oxw().bsModalRef.hide()}),e.TgZ(4,"span",34),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",35),e.TgZ(7,"div",36),e.TgZ(8,"div",37),e.TgZ(9,"div",36),e.TgZ(10,"h6"),e._uU(11),e.qZA(),e.TgZ(12,"ul",38),e.YNc(13,F,4,3,"li",39),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",40),e.TgZ(15,"div",36),e.TgZ(16,"div",41),e.TgZ(17,"h6"),e._uU(18,"Start Time"),e.qZA(),e.qZA(),e.TgZ(19,"div",41),e.TgZ(20,"h6"),e._uU(21,"End Time"),e.qZA(),e.qZA(),e._UZ(22,"div",42),e.qZA(),e.TgZ(23,"div",36),e.TgZ(24,"div",41),e.TgZ(25,"ngb-timepicker",43),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().timeStart=o})("ngModelChange",function(o){return e.CHM(n),e.oxw().onTimeStartChange(o)}),e.qZA(),e.qZA(),e.TgZ(26,"div",41),e.TgZ(27,"ngb-timepicker",44),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().timeEnd=o})("ngModelChange",function(o){return e.CHM(n),e.oxw().onTimeEndChange(o)}),e.qZA(),e.qZA(),e.TgZ(28,"div",45),e.TgZ(29,"button",46),e.NdJ("click",function(){return e.CHM(n),e.oxw().addTimeSlot()}),e._uU(30,"Add"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",47),e.TgZ(32,"button",48),e.NdJ("click",function(){return e.CHM(n),e.oxw().bsModalRef.hide()}),e._uU(33,"Close"),e.qZA(),e.qZA()}if(2&r){const n=e.oxw();e.xp6(11),e.Oqu(n.clickedDay),e.xp6(2),e.Q6J("ngForOf",n.timeSlots),e.xp6(12),e.Q6J("hourStep",n.hourStep)("minuteStep",n.minuteStep)("ngModel",n.timeStart)("spinners",!1)("meridian",n.meridianStart),e.xp6(2),e.Q6J("ngModel",n.timeEnd)("meridian",n.meridianEnd)("spinners",!1)}}const k={red:{primary:"#ad2121",secondary:"#FAE3E3"},blue:{primary:"#1e90ff",secondary:"#D1E8FF"},yellow:{primary:"#e3bc08",secondary:"#FDF1BA"}};let U=(()=>{class r{constructor(n,i,o,a,u,Z){this.modal=n,this.appointmentService=i,this.modalService=o,this.toaster=a,this.datePipe=u,this.timeSlotService=Z,this.view="month",this.title="Modal Title",this.viewDate=new Date,this.refresh=new h.xQ,this.events=[],this.activeDayIsOpen=!0,this.date=new Date,this._dateFormat=new f(this.datePipe),this.timeSlots=[],this.meridianStart=!0,this.meridianEnd=!0,this.fromTime=null,this.toTime=null,this.startDate=this._dateFormat.dateTransformFullYear(new Date(this.date.getFullYear(),this.date.getMonth(),1)),this.endDate=this._dateFormat.dateTransformFullYear(new Date(this.date.getFullYear(),this.date.getMonth()+1,0)),this.timeStart={hour:this.date.getHours(),minute:this.date.getMinutes()},this.timeEnd={hour:this.date.getHours()+1,minute:this.date.getMinutes()}}ngOnInit(){this.userId=Number(localStorage.getItem("userId")),this.getAppointments(this.userId)}dayClicked({date:n,events:i}){this.dayEvents=i;let o=new Date(n);this.clickedDay=o.toString().split(":")[0].slice(0,-3),this.timeSlots=[],this.isDayClicked=!0,this.slotDate=o}getTimeSlots(){let n=[];this.timeSlotService.getTimeSlotsByLawyerId(this.userId).subscribe(i=>{i.data.forEach(a=>{let u=a.fromTime.toString().split("T"),C=this._dateFormat.dateFromString(`${u[0]} ${u[1]}`);this.slotDate.getFullYear()==C.getFullYear()&&this.slotDate.getMonth()==C.getMonth()&&this.slotDate.getDate()==C.getDate()&&n.push(a)});let o=[];this.dayEvents.forEach(a=>{o.push(a.id)}),n.forEach(a=>{a.isBooked=!!o.includes(a.id),a.fromTime=`${a.fromTime.split("T")[1].split(":")[0]}:${a.fromTime.split("T")[1].split(":")[1]}`,a.toTime=`${a.toTime.split("T")[1].split(":")[0]}:${a.toTime.split("T")[1].split(":")[1]}`,this.timeSlots.push(a)})},i=>{})}eventTimesChanged({event:n,newStart:i,newEnd:o}){n.start=i,n.end=o,this.handleEvent("Dropped or resized",n),this.refresh.next()}handleEvent(n,i){this.modalData={event:i,action:n},this.modal.open(this.modalContent,{size:"lg"})}onTimeStartChange(n){let i=this._dateFormat.dateTransformFullYear(this.slotDate);this.fromTime=this._dateFormat.dateFromString(`${i} ${n.hour}:${n.minute}`)}onTimeEndChange(n){let i=this._dateFormat.dateTransformFullYear(this.slotDate);this.toTime=this._dateFormat.dateFromString(`${i} ${n.hour}:${n.minute}`)}addTimeSlot(){let n=this._dateFormat.dateTransformFullYear(this.slotDate);null===this.fromTime&&(this.fromTime=this._dateFormat.dateFromString(`${n} ${this.timeStart.hour}:${this.timeStart.minute}`)),null===this.toTime&&(this.toTime=this._dateFormat.dateFromString(`${n} ${this.timeEnd.hour}:${this.timeEnd.minute}`));let i={lawyerId:this.userId,fromTime:new g.uU("en-US").transform(this.fromTime,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),toTime:new g.uU("en-US").transform(this.toTime,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'")};this.timeSlotService.createTimeSlot(i).subscribe(o=>{this.timeSlots=[],this.getTimeSlots()})}getAppointments(n){this.appointmentService.getAppointmentsByStatusOrLawyerId({lawyerId:n}).subscribe(o=>{o.data.forEach(u=>{let Z=u.appointmentDate.toString().split("T"),D=Z[0],C=Z[1],N=this._dateFormat.dateFromString(`${D} ${C}`),I=this._dateFormat.dateFromString(`${D} ${C}`);this.events.push({id:u.timeSlotId,title:u.status,color:k.red,start:N,end:I})}),this.events.length||this.toaster.success(t.v.toasterEmptyAppointment,"",{timeOut:t.v.toasterTimeout})},o=>{this.toaster.error(t.v.toasterAppointmentError,t.v.toasterFailure,{timeOut:t.v.toasterTimeout})}),"month"==this.view&&setTimeout(()=>{document.getElementsByClassName("cal-open-day-events").length&&document.getElementsByClassName("cal-open-day-events")[0].setAttribute("style","display: none;")},50)}openModal(n){this.getTimeSlots(),this.bsModalRef=this.modalService.show(n,{class:"modal-dialog-centered modal-lg"})}save(){this.bsModalRef.hide()}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(b.FF),e.Y36(S.H),e.Y36(p.tT),e.Y36(_._W),e.Y36(g.uU),e.Y36(v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-appointment-calendar"]],viewQuery:function(n,i){if(1&n&&e.Gf(q,5),2&n){let o;e.iGM(o=e.CRH())&&(i.modalContent=o.first)}},decls:38,vars:17,consts:[[1,"page-breadcrumb","d-none","d-sm-flex","align-items-center","mb-3"],[1,"breadcrumb-title","pe-3"],[1,"ps-3"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0","p-0"],[1,"breadcrumb-item"],["href","#",3,"click"],[1,"bx","bx-home-alt"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-content"],[1,"card-body"],[1,"row","d-flex","flex-wrap","justify-content-md-between","mb-3","no-gutters"],[1,"col"],[1,"btn-group","d-none","d-sm-none","d-md-none","d-lg-block"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-danger",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn-group","d-block","d-sm-block","d-md-block","d-lg-none"],["mwlCalendarPreviousView","",1,"btn","btn-primary","btn-sm","pb-0","bx","bx-caret-left",3,"view","viewDate","viewDateChange"],[1,"icon","icon-arrows-left"],["mwlCalendarToday","",1,"btn","btn-danger","btn-sm","pb-0","bx","bx-caret-down",3,"viewDate","viewDateChange"],[1,"icon","icon-arrows-sign-down"],["mwlCalendarNextView","",1,"btn","btn-primary","btn-sm","pb-0","bx","bx-caret-right",3,"view","viewDate","viewDateChange"],[1,"icon","icon-arrows-right"],[1,"col","text-end","align-self-center","align-items-center"],[1,"mb-0"],[3,"ngSwitch"],[3,"viewDate","events","refresh","dayClicked","eventClicked","eventTimesChanged",4,"ngSwitchCase"],["template",""],[3,"viewDate","events","refresh","dayClicked","eventClicked","eventTimesChanged"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-3"],[1,"list-group","list-group-flush","radius-10"],["class","col list-group-item d-flex align-items-center radius-10 mb-2 shadow-sm",4,"ngFor","ngForOf"],[1,"col-md-9"],[1,"col-md-5"],[1,"col-md-2"],["id","timePickerStart",3,"hourStep","minuteStep","ngModel","spinners","meridian","ngModelChange"],["id","timePickerEnd",3,"ngModel","meridian","spinners","ngModelChange"],[1,"col-md-2","align-self-center"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"col","list-group-item","d-flex","align-items-center","radius-10","mb-2","shadow-sm"],[1,"flex-grow-1",3,"ngClass"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2,"Dashboard"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"nav",3),e.TgZ(5,"ol",4),e.TgZ(6,"li",5),e.TgZ(7,"a",6),e.NdJ("click",function(a){return a.preventDefault()}),e._UZ(8,"i",7),e.qZA(),e.qZA(),e.TgZ(9,"li",8),e._uU(10,"Appointment Calender"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"a",15),e.NdJ("viewDateChange",function(a){return i.viewDate=a}),e._uU(18," Previous "),e.qZA(),e.TgZ(19,"a",16),e.NdJ("viewDateChange",function(a){return i.viewDate=a}),e._uU(20," Today "),e.qZA(),e.TgZ(21,"a",17),e.NdJ("viewDateChange",function(a){return i.viewDate=a}),e._uU(22," Next "),e.qZA(),e.qZA(),e.TgZ(23,"div",18),e.TgZ(24,"a",19),e.NdJ("viewDateChange",function(a){return i.viewDate=a}),e._UZ(25,"i",20),e.qZA(),e.TgZ(26,"a",21),e.NdJ("viewDateChange",function(a){return i.viewDate=a}),e._UZ(27,"i",22),e.qZA(),e.TgZ(28,"a",23),e.NdJ("viewDateChange",function(a){return i.viewDate=a}),e._UZ(29,"i",24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",25),e.TgZ(31,"h6",26),e._uU(32),e.ALo(33,"calendarDate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",27),e.YNc(35,M,1,3,"mwl-calendar-month-view",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,E,34,10,"ng-template",null,29,e.W1O)),2&n&&(e.xp6(17),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(2),e.Q6J("viewDate",i.viewDate),e.xp6(2),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(3),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(2),e.Q6J("viewDate",i.viewDate),e.xp6(2),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(4),e.Oqu(e.Dn7(33,13,i.viewDate,i.view+"ViewTitle","en")),e.xp6(2),e.Q6J("ngSwitch",i.view),e.xp6(1),e.Q6J("ngSwitchCase","month"))},directives:[c.Z2,c.bb,c.mD,g.RF,g.n9,c.GH,g.sg,b.Pm,T.JJ,T.On,g.mk],pipes:[c.Yi],styles:[".booked[_ngcontent-%COMP%]{background-color:#0ff;color:#00f}"]}),r})()},5414:(x,y,s)=>{s.d(y,{J:()=>S});var h=s(7776),t=s(7716),g=s(7535),A=s(2290),f=s(8583);function e(p,_){1&p&&(t.TgZ(0,"div"),t.TgZ(1,"h4",19),t._uU(2,"No pending appointments."),t.qZA(),t.qZA())}function b(p,_){if(1&p){const l=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div",20),t._UZ(7,"i",21),t.TgZ(8,"span"),t._uU(9,"Pending"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"td"),t.TgZ(11,"div",22),t.TgZ(12,"button",23),t.NdJ("click",function(){const v=t.CHM(l).$implicit;return t.oxw().appointmentCancel(v.id)}),t._uU(13,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&p){const l=_.$implicit;t.xp6(2),t.Oqu(l.appointmentDate),t.xp6(2),t.Oqu(l.callType)}}let S=(()=>{class p{constructor(l,d){this.appointmentService=l,this.toaster=d,this.date=new Date,this.events=[],this.newAppointments=[]}ngOnInit(){this.userId=Number(localStorage.getItem("userId")),this.getAppointments("pending",this.userId)}getAppointments(l,d){this.appointmentService.getAppointmentsByStatusOrLawyerId({status:l,lawyerId:d}).subscribe(v=>{var c;this.newAppointments=v.data,null===(c=this.newAppointments)||void 0===c||c.forEach(T=>{this.events.push({appointmentDate:T.appointmentDate.toString().split("T")[0],callType:T.callType,id:T.id,status:T.status})}),console.log(this.events,"events"),this.events.length?this.isEmpty=!1:(this.isEmpty=!0,console.log(this.isEmpty))})}appointmentCancel(l){this.toBeCanceledAppointment=this.newAppointments.filter(d=>d.id==l),this.toBeCanceledAppointment[0].status="cancel",this.appointmentService.updateAppointments(this.toBeCanceledAppointment[0]).subscribe(d=>{this.events=[],this.getAppointments("pending",this.userId),this.toaster.success(h.v.toasterAppointmentCancel,h.v.toasterSuccess,{timeOut:h.v.toasterTimeout})},d=>{this.toaster.error(h.v.toasterAppointmentCancel,h.v.toasterFailure,{timeOut:h.v.toasterTimeout})})}}return p.\u0275fac=function(l){return new(l||p)(t.Y36(g.H),t.Y36(A._W))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-new-appointment"]],decls:33,vars:2,consts:[[1,"page-breadcrumb","d-none","d-sm-flex","align-items-center","mb-3"],[1,"breadcrumb-title","pe-3"],[1,"ps-3"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0","p-0"],[1,"breadcrumb-item"],["href","#",3,"click"],[1,"bx","bx-home-alt"],["aria-current","page",1,"breadcrumb-item","active"],[1,"align-items-center","mb-2","mt-2","gap-3"],[1,"row","row-cols-1","row-cols-md-1"],[1,"col"],[4,"ngIf"],[1,"card","radius-10","shadow-none","overflow-hidden"],[1,"card-body"],[1,"table-responsive"],[1,"table","align-middle","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"d-flex","align-items-center","text-danger"],[1,"bx","bx-radio-circle-marked","bx-burst","bx-rotate-90","align-middle","font-18","me-1"],[1,"d-flex","order-actions"],[1,"btn","btn-outline-danger",3,"click"]],template:function(l,d){1&l&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._uU(2,"Dashboard"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"nav",3),t.TgZ(5,"ol",4),t.TgZ(6,"li",5),t.TgZ(7,"a",6),t.NdJ("click",function(v){return v.preventDefault()}),t._UZ(8,"i",7),t.qZA(),t.qZA(),t.TgZ(9,"li",8),t._uU(10,"New Appointments"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",9),t.TgZ(12,"div"),t._uU(13,"Appointment Requests"),t.qZA(),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.YNc(16,e,3,0,"div",12),t.TgZ(17,"div",13),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t.TgZ(20,"table",16),t.TgZ(21,"thead",17),t.TgZ(22,"tr"),t.TgZ(23,"th"),t._uU(24,"Date"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Call Type"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Status"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"tbody"),t.YNc(32,b,14,2,"tr",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&l&&(t.xp6(16),t.Q6J("ngIf",d.isEmpty),t.xp6(16),t.Q6J("ngForOf",d.events))},directives:[f.O5,f.sg],styles:[""]}),p})()}}]);