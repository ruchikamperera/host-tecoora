"use strict";(self.webpackChunksyndron=self.webpackChunksyndron||[]).push([[794],{3794:(f,p,s)=>{s.r(p),s.d(p,{AccountSettingsModule:()=>L});var d=s(8583),e=s(7716),u=s(3679),a=s(7776),h=s(3625),c=s(2290),S=s(2965),g=s(1948),U=s(3837);const T=["avatarImg"];function F(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",35),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).removePhoto()}),e._uU(1,"close"),e.qZA()}}function I(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",32),e.NdJ("mouseleave",function(){return e.CHM(t),e.oxw().showAddPhotoOverlay=!1}),e.TgZ(1,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),i=e.MAs(8);return r.openFileInput(i)}),e.TgZ(2,"mat-icon"),e._uU(3,"add_a_photo"),e.qZA(),e.qZA(),e.YNc(4,F,2,0,"mat-icon",34),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.photo&&""!==t.photo)}}function b(o,l){1&o&&(e.TgZ(0,"div",36),e.TgZ(1,"label",19),e._uU(2,"Consultation fee ($)"),e.qZA(),e.qZA())}function x(o,l){1&o&&(e.TgZ(0,"dt",12),e._uU(1,"One hour"),e.qZA())}function M(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"dd",13),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().oneHourFee=r}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.oneHourFee),e.xp6(1),e.Oqu(null==t.user?null:t.user.consultationFeeForOneHour)}}function O(o,l){1&o&&(e.TgZ(0,"dt",12),e._uU(1,"Half an hour"),e.qZA())}function q(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"dd",13),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().halfHourFee=r}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.halfHourFee),e.xp6(1),e.Oqu(null==t.user?null:t.user.consultationFeeForHalfAndHour)}}function P(o,l){1&o&&(e.TgZ(0,"dt",12),e.TgZ(1,"label"),e._uU(2,"Charging for extra minutes"),e.qZA(),e.qZA())}function E(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"dd",37),e.TgZ(1,"input",38),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().isCharging=r}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.isCharging)("checked",t.isCharging)("disabled",!0)}}function w(o,l){1&o&&(e.TgZ(0,"div"),e.TgZ(1,"label"),e._uU(2,"Consultation fee ($)"),e.qZA(),e.qZA())}function H(o,l){1&o&&(e.TgZ(0,"div",50),e.TgZ(1,"label",45),e._uU(2,"One hour"),e.qZA(),e._UZ(3,"input",51),e.qZA())}function B(o,l){1&o&&(e.TgZ(0,"div",50),e.TgZ(1,"label",45),e._uU(2,"Half hour"),e.qZA(),e._UZ(3,"input",52),e.qZA())}function J(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",40),e.TgZ(1,"input",53),e.NdJ("change",function(r){return e.CHM(t),e.oxw(2).chargingChange(r)}),e.qZA(),e.TgZ(2,"label",45),e._uU(3,"Charging for extra minutes"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.isCharging)}}function N(o,l){if(1&o&&(e.TgZ(0,"form",39),e.TgZ(1,"div",40),e.TgZ(2,"label",41),e._uU(3,"Name"),e.qZA(),e._UZ(4,"input",42),e.qZA(),e.TgZ(5,"div",40),e.TgZ(6,"label",43),e._uU(7,"State"),e.qZA(),e._UZ(8,"input",44),e.qZA(),e.TgZ(9,"div",40),e.TgZ(10,"label",45),e._uU(11,"Company name"),e.qZA(),e._UZ(12,"input",46),e.qZA(),e.YNc(13,w,3,0,"div",47),e.YNc(14,H,4,0,"div",48),e.YNc(15,B,4,0,"div",48),e.YNc(16,J,4,1,"div",49),e.qZA()),2&o){const t=e.oxw();e.Q6J("formGroup",t.editForm),e.xp6(13),e.Q6J("ngIf",!t.isStaff),e.xp6(1),e.Q6J("ngIf",!t.isStaff),e.xp6(1),e.Q6J("ngIf",!t.isStaff),e.xp6(1),e.Q6J("ngIf",!t.isStaff)}}let A=(()=>{class o{constructor(t,n,r,i){this.userService=t,this.editBuilder=n,this.toaster=r,this.fileService=i,this.isEdit=!0,this.photoUpdated=new e.vpe,this.showAddPhotoOverlay=!1}ngOnInit(){this.userId=Number(localStorage.getItem("userId")),this.getProfileByLoggedInUserId(this.userId)}getProfileByLoggedInUserId(t){this.userService.getUserById(t).subscribe(n=>{console.log(n,"user"),this.user=n.data,this.name=this.user.firstName,this.state=this.user.state,this.companyName=this.user.companyName,this.oneHourFee=this.user.consultationFeeForOneHour,this.halfHourFee=this.user.consultationFeeForHalfAndHour,this.isCharging=this.user.chargingForExtraMin,this.photo=this.user.profileImageUrl,localStorage.setItem("profileImage",this.photo),"staff"==this.user.userType&&(this.isStaff=!0),this.createForm()})}createForm(){this.editForm=this.editBuilder.group({fName:[this.name,u.kI.required],fState:[this.state,u.kI.required],fCompanyName:[this.companyName,u.kI.required],fHourCharge:[this.oneHourFee],fHalfHourCharge:[this.halfHourFee],fIsCharging:[this.isCharging]})}chargingChange(t){this.isCharging=t.target.checked}saveEditedDetails(){let t=this.editForm.controls.fName.value,n=this.editForm.controls.fState.value,r=this.editForm.controls.fCompanyName.value,i=this.editForm.controls.fHourCharge.value,_=this.editForm.controls.fHalfHourCharge.value,m=this.editForm.controls.fIsCharging.value;this.editForm.controls.fName.value!=this.name||this.editForm.controls.fState.value!=this.state||this.editForm.controls.fCompanyName.value!=this.companyName||this.editForm.controls.fHourCharge.value!=this.oneHourFee||this.editForm.controls.fHalfHourCharge.value!=this.halfHourFee||this.editForm.controls.fIsCharging.value!=this.isCharging?(this.isEdit=!0,this.userService.updateUser({id:this.user.id,firstName:t,lastName:this.user.lastName,userType:this.user.userType,email:this.user.email,companyName:r,dob:this.user.dob,studentType:this.user.studentType,state:n,noOfReviews:this.user.noOfReviews,yearsOfExperience:this.user.yearsOfExperience,consultationFeeForOneHour:i,consultationFeeForHalfAndHour:_,chargingForExtraMin:m,profileImageUrl:this.photo}).subscribe(C=>{console.log(C,"update"),this.getProfileByLoggedInUserId(this.user.id),this.toaster.success(a.v.toasterUpdateUser,a.v.toasterSuccess,{timeOut:a.v.toasterTimeout})},C=>{this.toaster.error(a.v.toasterUpdateUserError,a.v.toasterFailure,{timeOut:a.v.toasterTimeout})})):(this.isEdit=!1,this.toaster.success(a.v.toasterUpdateAsSame,a.v.toasterSuccess,{timeOut:a.v.toasterTimeout}))}addPhoto(t){const n=new FileReader;n.onload=()=>{this.avatarImgElement.nativeElement.src=n.result},n.readAsDataURL(t.target.files[0]);let r=t.target.files[0],i=t.target.files[0];const _=new FormData;_.append("file",i,i.name),console.log(r),this.fileService.userFileUpload(_).subscribe(m=>{console.log(m,"image url");let v=m;this.photo=v,this.user.profileImageUrl=v,this.userService.updateUser(this.user).subscribe(C=>{console.log(C,"updated user"),localStorage.setItem("profileImage",this.photo),this.toaster.success(a.v.toasterUpdateUser,a.v.toasterSuccess,{timeOut:a.v.toasterTimeout}),location.reload()})},m=>{console.log(m,"error")})}openFileInput(t){t.click(),this.showAddPhotoOverlay=!1}removePhoto(){this.avatarImgElement.nativeElement.src="",this.photo=null,this.user.profileImageUrl=this.photo,this.userService.updateUser(this.user).subscribe(t=>{console.log(t,"updated user photo"),localStorage.setItem("profileImage",this.photo),this.toaster.success(a.v.toasterUpdateUser,a.v.toasterSuccess,{timeOut:a.v.toasterTimeout}),location.reload()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.K),e.Y36(u.qu),e.Y36(c._W),e.Y36(S.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings"]],viewQuery:function(t,n){if(1&t&&e.Gf(T,7),2&t){let r;e.iGM(r=e.CRH())&&(n.avatarImgElement=r.first)}},outputs:{photoUpdated:"photoUpdated"},decls:52,vars:16,consts:[[1,"card"],[1,"row","g-0"],[1,"col-md-2","p-5","border-end"],["id","avatar-container"],["id","avatar-photo","alt","avatar photo",1,"avatar-photo",3,"src","mouseenter"],["avatarImg",""],["id","add-photo-overlay","class","avatar-photo",3,"mouseleave",4,"ngIf"],["type","file","name","avatar","accept","image/png, image/jpeg",2,"display","none",3,"change"],["fileInput",""],[1,"col-md-10"],[1,"card-body"],[1,"row"],[1,"col-sm-4"],["ngDefaultControl","",1,"col-sm-8",3,"ngModel","ngModelChange"],["class","mt-3",4,"ngIf"],["class","col-sm-4",4,"ngIf"],["class","col-sm-8","ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","col-sm-8",4,"ngIf"],[1,"row","row-cols-auto","row-cols-1","row-cols-md-3","align-items-center"],[1,"col"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleLargeModal",1,"btn","btn-outline-primary"],["id","exampleLargeModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["class","row g-3",3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"click"],["id","add-photo-overlay",1,"avatar-photo",3,"mouseleave"],["id","add-avatar-photo-button","mat-icon-button","",1,"center-positon-absolute",3,"click"],["id","remove-avatar-photo-button","matTooltip","remove this photo",3,"click",4,"ngIf"],["id","remove-avatar-photo-button","matTooltip","remove this photo",3,"click"],[1,"mt-3"],[1,"col-sm-8"],["type","checkbox","id","quantity","ngDefaultControl","","value","isCharging",1,"checkbox-round",3,"ngModel","checked","disabled","ngModelChange"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],["for","inputName",1,"form-label"],["type","text","formControlName","fName","id","inputName",1,"form-control"],["for","inputState",1,"form-label"],["type","text","formControlName","fState","id","inputState",1,"form-control"],["for","inputType",1,"form-label"],["type","text","formControlName","fCompanyName","id","inputCompanyName",1,"form-control"],[4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"col-md-6"],["type","text","formControlName","fHourCharge","id","inputCompanyName",1,"form-control"],["type","text","formControlName","fHalfHourCharge","id","inputCompanyName",1,"form-control"],["type","checkbox","id","quantity","formControlName","fIsCharging","value","isCharging",1,"checkbox-round","me-3",3,"checked","change"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"img",4,5),e.NdJ("mouseenter",function(){return n.showAddPhotoOverlay=!0}),e.qZA(),e.YNc(6,I,5,1,"div",6),e.TgZ(7,"input",7,8),e.NdJ("change",function(i){return n.addPhoto(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e.TgZ(10,"div",10),e.TgZ(11,"dl",11),e.TgZ(12,"dt",12),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"dd",13),e.NdJ("ngModelChange",function(i){return n.name=i}),e._uU(15),e.qZA(),e.TgZ(16,"dt",12),e._uU(17,"State"),e.qZA(),e.TgZ(18,"dd",13),e.NdJ("ngModelChange",function(i){return n.state=i}),e._uU(19),e.qZA(),e.TgZ(20,"dt",12),e._uU(21,"Company name"),e.qZA(),e.TgZ(22,"dd",13),e.NdJ("ngModelChange",function(i){return n.companyName=i}),e._uU(23),e.qZA(),e._UZ(24,"br"),e.YNc(25,b,3,0,"div",14),e.YNc(26,x,2,0,"dt",15),e.YNc(27,M,2,2,"dd",16),e.YNc(28,O,2,0,"dt",15),e.YNc(29,q,2,2,"dd",16),e.YNc(30,P,3,0,"dt",15),e.YNc(31,E,2,3,"dd",17),e.qZA(),e._UZ(32,"hr"),e._UZ(33,"div",18),e.TgZ(34,"div",19),e.TgZ(35,"button",20),e._uU(36,"Update Details"),e.qZA(),e.TgZ(37,"div",21),e.TgZ(38,"div",22),e.TgZ(39,"div",23),e.TgZ(40,"div",24),e.TgZ(41,"h5",25),e._uU(42,"Update Profile and Consultation Details"),e.qZA(),e._UZ(43,"button",26),e.qZA(),e.TgZ(44,"div",27),e.YNc(45,N,17,5,"form",28),e.qZA(),e.TgZ(46,"div",29),e.TgZ(47,"button",30),e._uU(48,"Close"),e.qZA(),e.TgZ(49,"button",31),e.NdJ("click",function(){return n.saveEditedDetails()}),e._uU(50,"Save changes"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(51,"hr"),e.qZA()),2&t&&(e.xp6(4),e.Q6J("src",n.photo&&""!==n.photo?n.photo:"/assets/images/gallery/user_avatar.png",e.LSH),e.xp6(2),e.Q6J("ngIf",n.showAddPhotoOverlay),e.xp6(8),e.Q6J("ngModel",n.name),e.xp6(1),e.Oqu(null==n.user?null:n.user.firstName),e.xp6(3),e.Q6J("ngModel",n.state),e.xp6(1),e.Oqu(null==n.user?null:n.user.state),e.xp6(3),e.Q6J("ngModel",n.companyName),e.xp6(1),e.Oqu(null==n.user?null:n.user.companyName),e.xp6(2),e.Q6J("ngIf",!n.isStaff),e.xp6(1),e.Q6J("ngIf",!n.isStaff),e.xp6(1),e.Q6J("ngIf",!n.isStaff),e.xp6(1),e.Q6J("ngIf",!n.isStaff),e.xp6(1),e.Q6J("ngIf",!n.isStaff),e.xp6(1),e.Q6J("ngIf",!n.isStaff),e.xp6(1),e.Q6J("ngIf",!n.isStaff),e.xp6(14),e.Q6J("ngIf",n.editForm))},directives:[d.O5,u.Fj,u.JJ,u.On,g.lW,U.Hw,u.Wl,u._Y,u.JL,u.sg,u.u],styles:["#avatar-container[_ngcontent-%COMP%]{position:fixed}#avatar-photo[_ngcontent-%COMP%], #add-photo-overlay[_ngcontent-%COMP%]{height:8rem;width:8rem}#add-photo-overlay[_ngcontent-%COMP%]{position:absolute;top:0px;z-index:2;background-color:#e9ecef99}#add-avatar-photo-button[_ngcontent-%COMP%]{position:absolute;z-index:3;color:#13293d}#remove-avatar-photo-button[_ngcontent-%COMP%]{position:absolute;cursor:pointer;width:20px;height:20px;font-size:20px;top:5%;right:5%;z-index:3;color:#fff;background-color:#00000091;border-radius:12px}#remove-avatar-photo-button[_ngcontent-%COMP%]:hover{background-color:#e74c3c}.center-positon-absolute[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.avatar-photo[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}"]}),o})();var Z=s(4145);const D=[{path:"",component:A,data:{title:"Settings"}}];let Q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Z.Bz.forChild(D)],Z.Bz]}),o})();var y=s(8392),Y=s(4466);let L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,Q,y.bz,Y.m,U.Ps,g.ot,y.IJ]]}),o})()},7339:(f,p,s)=>{s.d(p,{t:()=>d});var d=(()=>{return(e=d||(d={})).Login="login",e.GetUserById="users",e.GetUserByUserTypeOrSortByOrSerchByString="users",e.CreateUser="user",e.SignUp="signUp",e.UpdateUser="user",e.DeleteUserById="user/id",e.SendOTP="sendOtp",e.GetTimeSlotsByLawyerId="timeslots/lawyerId",e.CreateTimeSlot="timeSlots",e.GetStudentFormsByStudentId="studentPointForms/studentId",e.CreateStudentForm="studentPointForms",e.UpdateStudentForms="studentPointForms",e.DeleteStudentFormById="studentPointForms/id",e.GetCompanies="companies",e.CreateCompany="company",e.UpdateCompany="company",e.DeleteCompany="company/id",e.GetAppointments="appointments",e.CreateAppointments="appointment",e.UpdateAppointments="appointments",e.DeleteAppointment="appointment/id",e.GetAppointmentsByStatusOrLawyerId="appointments",e.AddLawyerRequestedFile="lawyerRequestedFiles",e.GetLawyerRequestedFile="getUserRequestedFiles",e.UserFileDetails="userfiledetails",e.UserFileUpload="userFileUpload",e.GetStudentUploadedFile="getUserUploadedFile",e.deleteUploadedFile="userUploadedFile",e.studentFileUpload="studentFileUpload",e.getPointForm="questions",e.getQuestion="question",d;var e})()},7776:(f,p,s)=>{s.d(p,{v:()=>d});let d=(()=>{class e{}return e.toasterTimeout=5e3,e.toasterSuccess="Success",e.toasterFailure="Failed",e.toasterSignUpSuccess="User Signup Success",e.toasterLoginSuccess="User Login.",e.toasterEmptyAppointment="No scheduled appointments.",e.toasterAppointmentError="Something wrong.",e.toasterAppointmentCancel="Appointment cancel.",e.toasterUpdateUser="Profile updated successfully.",e.toasterUpdateUserError="Profile update.",e.toasterUpdateAsSame="Same user profile",e.toasterSendOtp="Code sent successfully",e.toasterNotExistEmail="There is no user with entered email",e.toasterUserNormalSignIn="Please use the email and password to sign in",e.toasterNotStudent="You are not a student, please use the email and password to sign in",e.toasterSignInWithGoogle="You have sign in with google. please use google sign in",e.toasterSignInWithFacebook="You have sign in with facebook. please use facebook sign in",e.toasterInvalidAuthType="You signed in using social account. you can't proceed with password reset.",e.toasterNotExistOtp="Invalid code",e.toasterResetPassword="Reset password",e.toasterOtpValid="Code valid, continue password reset",e.fileSavedSuccess="File Saved Success",e.toasterCreateStaff="Staff created successfully.",e.toasterCreateStaffError="Staff create.",e.toasterDocumentRequest="Document request.",e.toasterDocumentUpload="Document upload.",e.toasterDocumentDelete="Document delete.",e.toasterPointFormSubmit="Point form submit.",e.toasterPointFormUpdate="Point form update.",e.toasterAttemptLimitExceed="Already submitted 3 times.",e})()},9135:(f,p,s)=>{s.d(p,{b:()=>u});var d=s(2340),e=s(7716);let u=(()=>{class a{constructor(){this.baseApiUrl=d.N.baseApiUrl,this.getBaseUrl=c=>`${this.baseApiUrl}/${c}`}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},3625:(f,p,s)=>{s.d(p,{K:()=>h});var d=s(7339),e=s(9135),u=s(7716),a=s(1841);let h=(()=>{class c extends e.b{constructor(g){super(),this.http=g}getUsers(){return this.http.get(this.getBaseUrl(d.t.GetUserById))}getUsersByType(g){return this.http.post(this.getBaseUrl(d.t.GetUserByUserTypeOrSortByOrSerchByString),g)}createUser(g){return this.http.post(this.getBaseUrl(d.t.SignUp),g)}updateUser(g){return this.http.put(this.getBaseUrl(d.t.CreateUser),g)}signUpUser(g){return this.http.post(this.getBaseUrl(d.t.SignUp),g)}getUserById(g){return this.http.get(this.getBaseUrl(`${d.t.GetUserById}/${g}`))}emailSendOtp(g){return this.http.get(this.getBaseUrl(`${g}/${d.t.SendOTP}`))}}return c.\u0275fac=function(g){return new(g||c)(u.LFG(a.eN))},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);